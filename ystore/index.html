<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Play Store Clone - JSON Data</title>
    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        :root {
            --gp-green: #01875f;
            --gp-bg: #ffffff;
            --gp-text-main: #202124;
            --gp-text-sub: #5f6368;
            --gp-border: #dadce0;
            --gp-surface: #f1f3f4;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--gp-bg);
            color: var(--gp-text-main);
            padding-bottom: 70px;
        }

        header {
            position: sticky;
            top: 0;
            background: white;
            z-index: 100;
            padding: 8px 16px;
        }

        .search-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--gp-surface);
            display: flex;
            align-items: center;
            padding: 10px 16px;
            border-radius: 28px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .search-container input {
            background: none;
            border: none;
            outline: none;
            width: 100%;
            margin: 0 12px;
            font-size: 16px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 16px;
        }

        .page { display: none; }
        .page.active { display: block; }

        .shelf { margin-bottom: 32px; }
        .shelf-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        .shelf-header h2 { font-size: 18px; font-weight: 500; }

        .app-scroller {
            display: flex;
            overflow-x: auto;
            gap: 16px;
            padding-bottom: 8px;
            scrollbar-width: none;
        }
        .app-scroller::-webkit-scrollbar { display: none; }

        .app-card { flex: 0 0 120px; cursor: pointer; }
        .card-icon {
            width: 120px; height: 120px;
            background: var(--gp-surface);
            border-radius: 22px;
            margin-bottom: 8px;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.1s;
        }
        .app-card:active .card-icon { transform: scale(0.92); }
        .card-icon span { font-size: 56px; color: var(--gp-text-sub); }

        .card-title {
            font-size: 13px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .card-rating {
            font-size: 11px;
            color: var(--gp-text-sub);
            display: flex; align-items: center; gap: 2px;
        }

        /* Detail View Styles */
        .detail-header { padding: 8px 0 24px; }
        .app-hero { display: flex; gap: 20px; margin-bottom: 24px; }
        .app-hero-icon {
            width: 88px; height: 88px; border-radius: 18px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .app-hero-icon span { font-size: 48px; color: white; }
        .app-hero-info h1 { font-size: 24px; font-weight: 500; }
        .dev-name { color: var(--gp-green); font-weight: 500; font-size: 14px; }

        .stats-container {
            display: flex; border-top: 1px solid var(--gp-border); border-bottom: 1px solid var(--gp-border);
            padding: 16px 0; margin-bottom: 24px;
        }
        .stat-box { text-align: center; flex: 1; border-right: 1px solid var(--gp-border); }
        .stat-box:last-child { border-right: none; }
        .stat-val { font-weight: 700; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 2px; }
        .stat-label { font-size: 11px; color: var(--gp-text-sub); }

        .install-btn {
            background: var(--gp-green); color: white; border: none; width: 100%;
            padding: 12px; border-radius: 8px; font-weight: 500; cursor: pointer;
            margin-bottom: 24px;
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: white; display: flex; padding: 8px 0;
            border-top: 1px solid var(--gp-border); z-index: 1000;
        }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; font-size: 11px; color: var(--gp-text-sub); }
        .nav-item.active { color: var(--gp-green); }

        /* Error Message */
        #error-msg {
            display: none; background: #fee; color: #c33; padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 14px;
        }
    </style>
</head>
<body>

<header>
    <div class="search-container">
        <span class="material-symbols-outlined" style="color: var(--gp-text-sub)">search</span>
        <input type="text" placeholder="アプリやゲームを検索">
    </div>
</header>

<div class="container">
    <div id="error-msg">データの読み込みに失敗しました。</div>

    <div id="home-page" class="page active">
        <section class="shelf">
            <div class="shelf-header"><h2>あなたへのおすすめ</h2></div>
            <div class="app-scroller" id="rec-apps"></div>
        </section>

        <section class="shelf">
            <div class="shelf-header"><h2>人気のゲーム</h2></div>
            <div class="app-scroller" id="game-apps"></div>
        </section>
    </div>

    <div id="detail-page" class="page">
        <div class="detail-header" onclick="showHome()">
            <span class="material-symbols-outlined" style="cursor: pointer;">arrow_back</span>
        </div>
        <div class="app-hero">
            <div id="detail-icon-bg" class="app-hero-icon">
                <span id="detail-icon" class="material-symbols-outlined"></span>
            </div>
            <div class="app-hero-info">
                <h1 id="detail-title"></h1>
                <p id="detail-dev" class="dev-name"></p>
                <p style="font-size: 11px; color: var(--gp-text-sub)">広告を含む・アプリ内課金あり</p>
            </div>
        </div>
        <div class="stats-container">
            <div class="stat-box">
                <div class="stat-val"><span id="detail-rating"></span> <span class="material-symbols-outlined" style="font-size: 14px; fill: 1;">star</span></div>
                <div class="stat-label">レビュー</div>
            </div>
            <div class="stat-box">
                <div class="stat-val" id="detail-downloads"></div>
                <div class="stat-label">ダウンロード</div>
            </div>
            <div class="stat-box">
                <div class="stat-val">3+</div>
                <div class="stat-label">全年齢対象</div>
            </div>
        </div>
        <button class="install-btn" id="install-btn" onclick="startInstall()">インストール</button>
        <div>
            <h3>このアプリについて</h3>
            <p id="detail-desc" style="font-size: 14px; color: var(--gp-text-sub); line-height: 1.6; margin-top: 8px;"></p>
        </div>
    </div>
</div>

<nav class="bottom-nav">
    <div class="nav-item active"><span class="material-symbols-outlined">games</span>ゲーム</div>
    <div class="nav-item"><span class="material-symbols-outlined">apps</span>アプリ</div>
    <div class="nav-item"><span class="material-symbols-outlined">book</span>書籍</div>
</nav>

<script>
    let globalApps = { recommended: [], games: [] };

    // JSONデータの読み込み
    async function loadAppData() {
        try {
            const response = await fetch('apps.json');
            if (!response.ok) throw new Error('Network response was not ok');
            const data = await response.json();
            globalApps = data;
            renderApps();
        } catch (error) {
            console.error('Error loading JSON:', error);
            document.getElementById('error-msg').style.display = 'block';
        }
    }

    function renderApps() {
        const recContainer = document.getElementById('rec-apps');
        const gameContainer = document.getElementById('game-apps');
        
        recContainer.innerHTML = globalApps.recommended.map(app => createAppCard(app)).join('');
        gameContainer.innerHTML = globalApps.games.map(app => createAppCard(app)).join('');
    }

    function createAppCard(app) {
        // オブジェクトを文字列にして onclick に渡すためのエスケープ
        const appJson = encodeURIComponent(JSON.stringify(app));
        return `
            <div class="app-card" onclick="showDetails('${appJson}')">
                <div class="card-icon" style="background: ${app.color || 'var(--gp-surface)'};">
                    <span class="material-symbols-outlined" style="color: ${app.color ? 'white' : 'var(--gp-text-sub)'}">${app.icon}</span>
                </div>
                <div class="card-info">
                    <div class="card-title">${app.title}</div>
                    <div class="card-rating">${app.rating} <span class="material-symbols-outlined" style="font-size:10px; fill:1">star</span></div>
                </div>
            </div>
        `;
    }

    function showDetails(encodedApp) {
        const app = JSON.parse(decodeURIComponent(encodedApp));
        
        document.getElementById('home-page').classList.remove('active');
        document.getElementById('detail-page').classList.add('active');
        
        document.getElementById('detail-title').textContent = app.title;
        document.getElementById('detail-dev').textContent = app.dev;
        document.getElementById('detail-icon').textContent = app.icon;
        document.getElementById('detail-rating').textContent = app.rating;
        document.getElementById('detail-downloads').textContent = app.downloads;
        document.getElementById('detail-desc').textContent = app.description || "詳細な説明はありません。";
        
        const iconBg = document.getElementById('detail-icon-bg');
        iconBg.style.background = app.color || 'var(--gp-surface)';
        document.getElementById('detail-icon').style.color = app.color ? 'white' : 'var(--gp-text-sub)';

        // Reset Install Button
        const btn = document.getElementById('install-btn');
        btn.textContent = 'インストール';
        btn.disabled = false;
        btn.style.background = 'var(--gp-green)';
        btn.style.color = 'white';
        btn.style.border = 'none';

        window.scrollTo(0, 0);
    }

    function showHome() {
        document.getElementById('detail-page').classList.remove('active');
        document.getElementById('home-page').classList.add('active');
    }

    function startInstall() {
        const btn = document.getElementById('install-btn');
        btn.textContent = '待機中...';
        btn.disabled = true;
        setTimeout(() => {
            btn.textContent = '開く';
            btn.disabled = false;
            btn.style.background = 'white';
            btn.style.color = 'var(--gp-green)';
            btn.style.border = '1px solid var(--gp-border)';
        }, 1500);
    }

    // 初回実行
    window.onload = loadAppData;
</script>

</body>
</html>